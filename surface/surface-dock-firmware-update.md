---
title: Обновление микропрограммы Microsoft Surface Dock 1
description: В этой статье объясняется, как использовать Microsoft Surface Dock Firmware Update для установки и управления микропрограммой на исходной док-станции Surface 1. При установке на устройстве Surface он обновляет устройства док-станции Surface 1, подключенные к устройству Surface.
ms.localizationpriority: medium
ms.prod: w10
ms.mktglfcycl: manage
ms.sitesec: library
author: greg-lindsay
ms.author: greglin
ms.topic: article
ms.reviewer: scottmca
manager: laurawi
ms.audience: itpro
ms.date: 2/08/2021
ms.openlocfilehash: a0acaaf0676c3f4403a2b233297781579ca1f4ae
ms.sourcegitcommit: 7029e80d9ca1a3de5c336cf662e566ed4b6b3e7a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/09/2021
ms.locfileid: "11319213"
---
# Обновление микропрограммы док-станции Microsoft Surface

> [!IMPORTANT]
> Эта статья содержит технические инструкции для ИТ-администраторов. Если вы — домашний пользователь, см. информацию об обновлении по док-станции [Surface](https://support.microsoft.com/help/4023478/surface-update-your-surface-dock)на сайте поддержки   Майкрософт. Инструкции на сайте поддержки такие же, как в общих шагах по установке ниже, но в этой статье приведены дополнительные сведения для мониторинга, проверки и развертывания обновления на нескольких устройствах в сети.

В этой статье объясняется, как использовать Microsoft Surface Dock Firmware Update для установки и управления микропрограммой на исходной док-станции Surface 1. При установке на устройстве Surface он обновляет устройства док-станции Surface 1, подключенные к устройству Surface.

> [!NOTE]
> Эта статья не относится к док-станции Surface 2, которая автоматически получает обновления через Обновление Windows или с помощью Microsoft Endpoint Configuration Manager или других средств развертывания MSI. Дополнительные узнать см. в новых [новых функциях док-станции Surface.](surface-dock-whats-new.md)

Это средство перемежает предыдущее средство Microsoft Surface Dock Updater, ранее доступное для скачивания в составе средств Surface для ИТ-служб. Предыдущее средство называлось Surface_Dock_Updater_vx.xx.xxx.x.msi (где x указывает номер версии) и больше не доступно для скачивания и не должно использоваться.

## Установка обновления микропрограмм док-станции Surface

В этом разделе описано, как вручную установить обновление микропрограмм.

> [!NOTE]
> Корпорация Майкрософт периодически выпускает новые версии обновления микропрограмм док-станции Surface. MSI-файл не обновляется самостоятельно. Если вы развернули MSI на устройства Surface и выпущена новая версия микропрограммы, потребуется развернуть новую версию.

1. Скачайте и установите [microsoft Surface Dock Firmware Update.](https://www.microsoft.com/download/details.aspx?id=46703)
    - Для обновления требуется устройство Surface под управлением Windows 10 версии 1803 или более поздней версии.
    - При установке MSI-файла может потребоваться перезапустить Surface. Однако для выполнения обновления перезагрузка не требуется.

2. Отсоедините устройство Surface от док-станции Surface, подождите около 5 секунд и снова подключите устройство. Обновление микропрограмм док-станции Surface автоматически обновляет док-станцию в фоновом режиме. Процесс может занять несколько минут и будет продолжен, даже если его прерывать. 

## Мониторинг обновления микропрограмм док-станции Surface

Этот раздел является необязательным и содержит обзор отслеживания установки обновления микропрограмм. 

Для отслеживания обновления:

1. Откройте окно просмотра событий, перейдите в приложение "Журналы **** **Windows>",** а затем в области "Действия" в правой области щелкните "Фильтр текущего журнала", **** введите **SurfaceDockFwUpdate** рядом с источниками событий **и**нажмите кнопку **"ОК"**.

2. Введите следующую команду в командной области с повышенными уровнями:

    ```console
    Reg query "HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion\WUDF\Services\SurfaceDockFwUpdate\Parameters"
    ```
3. Установите обновление, как описано в [следующем разделе](#install-the-surface-dock-firmware-update) этой статьи.

4. Событие 2007 со следующим текстом означает успешное обновление: обновление микропрограммы **завершено. hr=0 DriverTelementry EventCode = 2007**. 

   Если обновление не прошло успешно, то событие 2007 будет отображаться как событие **ошибки,** а не **"Сведения".** Кроме того, версия, зарегистрированная в реестре Windows, не будет текущей.
   
5. После завершения обновления обновленные значения DWORD будут отображаться в реестре Windows, соответствующем текущей версии средства. Подробные [сведения см. в](#versions-reference) справочном разделе "Версии" в этой статье. Например:

    - Component10CurrentFwVersion 0x04ac3970 (78395760)
    - Component20CurrentFwVersion 0x04915a70 (76634736)

>[!TIP]
>Если вы видите в тексте события "Не удается найти описание для события xxxx из источника SurfaceDockFwUpdate", это ожидаемое и может быть проигнорировано.

См. также следующие разделы в этой статье: 
  - [Проверка завершения обновления микропрограмм](#how-to-verify-completion-of-the-firmware-update)
  - [Ведение журнала событий](#event-logging)
  - [Советы по устранению неполадок](#troubleshooting-tips)
  - [Справочник по версиям](#versions-reference)

## Сетевое развертывание

Команды установщика Windows (Msiexec.exe) можно использовать для развертывания обновления микропрограмм док-станции Surface на нескольких устройствах в сети. При использовании Microsoft Endpoint Configuration Manager или другого средства развертывания введите следующий синтаксис, чтобы убедиться, что установка происходит в тихом режиме:

- **Msiexec.exe /i \<path to msi file\> /quiet /norestart** 

Например:

```console
msiexec /i "\\share\folder\Surface_Dock_FwUpdate_1.42.139_Win10_17134_19.084.31680_0.msi" /quiet /norestart
```

> [!NOTE]
> По умолчанию файл журнала не создается. Чтобы создать файл журнала, необходимо указать "/l*v [путь]". Например: Msiexec.exe /i \<path to msi file\> /l*v %windir%\logs\ SurfaceDockFWI.log"

Дополнительные сведения можно найти в [документации по вариантам командной строки.](https://docs.microsoft.com/windows/win32/msi/command-line-options)

> [!IMPORTANT]
> Если вы хотите обновить док-станцию Surface любым другим способом, обратитесь к сведениям об обновлении док-станции [Surface.](https://support.microsoft.com/help/4023478/surface-update-your-surface-dock)

## Развертывание Intune

Вы можете использовать Intune для распространения обновления микропрограмм док-станции Surface на устройства. Сначала необходимо преобразовать MSI-файл в формат .intunewin, как описано в следующей документации: [intune Standalone —](https://docs.microsoft.com/intune/apps/apps-win32-app-management)управление приложениями Win32.

Используйте следующую команду:
  - **msiexec /i \<path to msi file\> /quiet /q**

## Проверка завершения обновления микропрограммы

Микропрограмма док-станции Surface состоит из двух компонентов:

- **Component10:** Микроуровне контроллера (MCU)
- **Component20:** Прошивка порта отображения (DP).

Успешное завершение обновления микропрограмм док-станции Surface приводит к новым значениям ключа реестра для этих компонентов.

**Чтобы проверить обновления:**

1. Откройте Regedit и перейдите к следующему пути реестра:

    - **HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\WUDF\Services\SurfaceDockFwUpdate\Parameters**

2. Найди ключи реестра: **Component10CurrentFwVersion и Component20CurrentFwVersion,** которые ссылаются на программное обеспечение, которое в настоящее время находится на устройстве.

   ![Процесс установки обновления микропрограмм док-станции Surface](images/regeditDock.png)

3. Убедитесь, что новые значения ключей реестра соответствуют обновленным значениям ключа реестра, указанным в справочнике "Версии" в конце этого документа. Если значения совпадают, то микропрограмма была успешно обновлена.

4. Если не удается проверить, просмотрите советы по регистрации событий и устранению неполадок в следующем разделе.

## Ведение журнала событий

**Таблица1. Файлы журнала для обновления микропрограмм док-станции Surface**

| Log                              | Расположение                               | Заметки                                                                                                                                                                                                         |
| -------------------------------- | --------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Журнал обновления микропрограмм док-станции Surface | Должен быть указан путь (см. примечание) | В более ранних версиях этого средства записыты события в журналы приложений и служб\Microsoft Surface Dock Updater.                                                                                                  |
| Журнал установки устройств с Windows       | %windir%\inf\setupapi.dev.log           | Дополнительные сведения об использовании журнала установки устройств можно найти в документации [по журналу SetupAPI.](https://docs.microsoft.com/windows-hardware/drivers/install/setupapi-logging--windows-vista-and-later-) |


**Таблица2. ИД журнала событий для обновления микропрограмм док-станции Surface**<br>
События регистрируются в журнале событий приложений.  Примечание. В более ранних версиях этого средства события записыылись в журналы приложений и служб\Microsoft Surface Dock Updater.

| Идентификатор события | Тип события                                                           |
| -------- | -------------------------------------------------------------------- |
| 2001     | Обновление микропрограмм док-станции запущено.                                    |
| 2002     | Обновление микропрограммы док-станции пропущено, так как известно, что док-станция обновлена. |
| 2003     | Не удалось получить версию микропрограммы док-станции.                 |
| 2004     | Запрос версии микропрограммы.                                       |
| 2005     | Не удалось запустить обновление по док-станции.                                |
| 2006     | Не удалось отправить пары предложений и полезной нагрузки.                                  |
| 2007     | Обновление микропрограмм завершено.                                            |
| 2008     | Телеметрия док-станции BEGIN.                                                |
| 2011     | Телеметрия док-станции END.                                                  |

## Советы по устранению неполадок

- Полностью отключите питание док-станции Surface от питания переменного тока, чтобы сбросить док-станцию Surface.
- Отключите все периферийные устройства, кроме док-станции Surface.
- Удалить все текущие обновления микропрограмм док-станции Surface, а затем установить последнюю версию.
- Убедитесь, что док-станция Surface отключена, а затем предопустите достаточно времени для завершения обновления, отслеживаемого с помощью led-монитора в порте Ethernet док-станции. Подождите, пока led не перестанет мигать, прежде чем отключать док-станцию Surface от питания.
- Подключите док-станцию Surface к другому устройству, чтобы узнать, может ли она обновить док-станцию.

## Справочник по версиям

>[!NOTE]
>Файл установки выпущен в следующем формате ** именования: **Surface_Dock_FwUpdate_X.XX.XXX_Win10_XXXXX_XX.XXX.XXXXX_X.MSI(например, Surface_Dock_FwUpdate_1.42.139_Win10_17134_19.084.31680_0.msi) и устанавливается по умолчанию в папку C:\Program Files\SurfaceUpdate.

### Версия 1.53.139.0
*Дата выпуска: 4 августа 2020 г.*

Эта версия обновления микропрограммы док-станции Surface включает исправления ошибок и поддержку:
- Обновление док-станции Surface 1 с помощью Surface Pro X. 
   > [!NOTE]
   > Если вы работаете с Surface Pro X, скачайте . Сборка ARM64. Для всех остальных устройств используйте сборку AMD64. 

#### Значения ключей реестра

Значения реестра, которые указывают состояние обновлений микропрограмм, не изменились по сравнению с предыдущей версией этого средства: 

- Component10CurrentFwVersion обновлен до **версии 4ac3970.**
- Component20CurrentFwVersion обновлен до **версии 4a1d570.**
 
### Версия 1.42.139 
*Дата выпуска: 18 сентября 2019 г.*

Эта версия, в Surface_Dock_FwUpdate_1.42.139_Win10_17134_19.084.31680_0.MSI, обновляет микропрограммы в фоновом режиме. 

#### Обновленные значения ключей реестра

- Component10CurrentFwVersion обновлен до **версии 4ac3970.**
- Component20CurrentFwVersion обновлен до **версии 4a1d570.**

Он добавляет поддержку Surface Pro 7 и Surface Laptop 3.

## Устаревшие версии

### Версия 2.23.139.0
*Дата выпуска: 10 октября 2018 г.*

В этой версии Surface Dock Updater добавлена поддержка следующих возможностей:

- Добавление поддержки Surface Pro 6
- Добавление поддержки surface Laptop 2


### Версия 2.22.139.0
*Дата выпуска: 26 июля 2018 г.*

В этой версии Surface Dock Updater добавлена поддержка следующих возможностей:

- Повышение надежности обновления
- Добавление поддержки Surface Go

### Версия 2.12.136.0
*Дата выпуска: 29 января 2018 г.*

В этой версии Surface Dock Updater добавлена поддержка следующих устройств:
* обновление встроенного ПО основного чипсета док-станции Surface;
* обновление встроенного ПО порта дисплея док-станции Surface
* Повышенная стабильность внешних мониторов при использовании с Surface Book или Surface Book 2

Кроме того, установка этой версии средства обновления Surface Dock на устройствах Surface Book, включает следующее:
* обновление встроенного ПО Surface Book Base;
* поддержка обновления встроенного ПО док-станции Surface с улучшениями, предназначенными для устройств Surface Book.


### Версия 2.9.136.0
*Дата выпуска: 3 ноября 2017 г.*

В этой версии Surface Dock Updater добавлена поддержка следующих устройств:

* обновление встроенного ПО порта дисплея док-станции Surface
* Устраняет проблему передачи звука через пассивные адаптеры порта дисплея

### Версия 2.1.15.0
*Дата выпуска: 19 июня 2017 г.*

В этой версии Surface Dock Updater добавлена поддержка следующих возможностей:

* ноутбук Surface
* Surface Pro

### Версия 2.1.6.0
*Дата выпуска: 7 апреля 2017 г.*

В этой версии Surface Dock Updater добавлена поддержка следующих возможностей:

* обновление встроенного ПО порта дисплея док-станции Surface;
* требуется Windows 10.

### Версия 2.0.22.0
*Дата выпуска: 21 октября 2016 г.*

В этой версии Surface Dock Updater добавлена поддержка следующих возможностей:

* обновление для встроенного ПО USB док-станции Surface;
* повышенная надежность порта Ethernet, звукового и USB-портов.

### Версия 1.0.8.0
*Дата выпуска: 26 апреля 2016 г.*

В этой версии Surface Dock Updater добавлена поддержка следующих возможностей:

* обновление встроенного ПО основного чипсета док-станции Surface;
* обновление встроенного ПО порта дисплея док-станции Surface

