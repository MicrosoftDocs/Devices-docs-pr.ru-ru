---
title: Обновление встроенного по Microsoft Surface Dock — технические сведения для ИТ-администраторов
description: В этой статье объясняется, как использовать обновление встроенного по Surface Dock для обновления микропрограммы Surface Dock. После установки на устройстве Surface она будет обновлять все стыковочные устройства, подключенные к устройству Surface.
ms.localizationpriority: medium
ms.prod: w10
ms.mktglfcycl: manage
ms.sitesec: library
author: greg-lindsay
ms.author: greglin
ms.topic: article
ms.reviewer: scottmca
manager: laurawi
ms.audience: itpro
ms.date: 8/07/2020
ms.openlocfilehash: 9069903421d6e621dfbc31cd1cfaffb045fa9f19
ms.sourcegitcommit: c1efb75e8524193bdc0a5f7496dc23a92ac665c8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/12/2020
ms.locfileid: "11114557"
---
# Обновление встроенного по Surface Dock (Майкрософт): технические сведения для администраторов ИТ

> [!IMPORTANT]
> В этой статье содержатся технические инструкции для ИТ – администраторов. Если вы являетесь домашним пользователем, ознакомьтесь [со сведениями о том, как обновить встроенное по Surface Dock](https://support.microsoft.com/help/4023478/surface-update-your-surface-dock)   на сайте службы поддержки Майкрософт. Инструкции на сайте поддержки совпадают с общими инструкциями по установке, но в этой статье приведены дополнительные сведения для мониторинга, проверки и развертывания обновления на нескольких устройствах в сети.

В этой статье объясняется, как использовать обновление встроенного по Surface Dock для обновления микропрограмм на исходном док Surface (1) и не относится к стыковочному узлу 2. После установки на устройстве Surface она будет обновлять все стыковочные устройства, подключенные к устройству Surface. 

Это средство заменяет более раннюю версию средства обновления Microsoft Surface Dock, ранее выпущенную для загрузки в составе средств Surface для него. Более ранний инструмент назывался Surface_Dock_Updater_vx.xx.xxx.x.msi (где x указывает номер версии) и больше не доступен для загрузки и не должен использоваться.

## Установка обновления встроенного по для Surface Dock

В этом разделе объясняется, как установить обновление встроенного по вручную.

> [!NOTE]
> Корпорация Майкрософт периодически выпускает новые версии обновления встроенного по для Surface Dock. Файл MSI не обновляется автоматически. Если вы развернули MSI для устройств Surface и вы выпустили новую версию микропрограммы, вам потребуется развернуть новую версию.

1. Скачайте и установите [Обновление встроенного по Surface Dock (Майкрософт](https://www.microsoft.com/download/details.aspx?id=46703)).
    - Для установки обновления требуется устройство Surface под управлением Windows 10 версии 1803 или более поздней.
    - Установка MSI-файла может подать запрос на перезапуск Surface. Однако перезагрузка не требуется для выполнения обновления.

2. Отключите устройство Surface от стыковочного узла, подождите 5 секунд, а затем повторно подключитесь. Обновление встроенного по для Surface Dock автоматически обновит закрепление в фоновом режиме. Процесс может занять несколько минут и продолжаться, даже если он будет прерван. 

## Мониторинг обновления встроенного по закрепляемого по на Surface

Этот раздел является необязательным и содержит общие сведения о том, как следить за установкой обновления встроенного по. 

Для наблюдения за обновлением выполните указанные ниже действия.

1. Откройте окно просмотра событий, перейдите в раздел " **журналы > приложение**", а затем в разделе **действия** на правой панели щелкните **фильтр текущего журнала**, введите **SurfaceDockFwUpdate** рядом с разделом " **источники событий**" и нажмите кнопку **ОК**.

2. Введите следующую команду в командной строке с повышенными привилегиями:

    ```cmd
    Reg query "HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion\WUDF\Services\SurfaceDockFwUpdate\Parameters"
    ```
3. Установите обновление, как описано в [следующем разделе](#install-the-surface-dock-firmware-update) этой статьи.
4. Событие 2007 со следующим текстом указывает на успешное обновление: **Обновление встроенного по завершено. hr = 0 DriverTelementry EventCode = 2007**. 
    - Если обновление не прошло успешно, событие с кодом 2007 будет отображаться как событие **ошибки** , а не как **сведения**. Кроме того, версия, указанная в реестре Windows, не будет актуальной.
5. После завершения обновления в реестре Windows появится обновленные значения DWORD, соответствующие текущей версии средства. Подробные сведения приведены в разделе [Справочник по версиям](#versions-reference) в этой статье. Например:
    - Component10CurrentFwVersion 0x04ac3970 (78395760)
    - Component20CurrentFwVersion 0x04915a70 (76634736)

>[!TIP]
>Если вы видите сообщение "описание для идентификатора события XXXX из исходного SurfaceDockFwUpdate не найдено" в тексте события, это ожидается и может быть проигнорировано.

Кроме того, в этой статье вы узнаете о следующих разделах: 
  - [Проверка завершения обновления встроенного по](#how-to-verify-completion-of-the-firmware-update)
  - [Ведение журнала событий](#event-logging)
  - [Советы по устранению неполадок](#troubleshooting-tips)
  - [Справочник по версиям](#versions-reference)

## Развертывание по сети

Вы можете использовать команды установщика Windows (Msiexec.exe) для развертывания обновления встроенного по для Surface Dock на нескольких устройствах в сети. При использовании диспетчера конфигураций конечных точек Microsoft или другого средства развертывания введите следующий синтаксис, чтобы убедиться, что установка не выполняется автоматически.

- **Msiexec.exe/i \<path to msi file\> /quiet/norestart** 

  Например:
  ```
  msiexec /i "\\share\folder\Surface_Dock_FwUpdate_1.42.139_Win10_17134_19.084.31680_0.msi" /quiet /norestart
  ```

  > [!NOTE]
  > Файл журнала по умолчанию не создается. Чтобы создать файл журнала, необходимо добавить "/l*v [путь]". Например: Msiexec.exe/i \<path to msi file\> /l*v%WINDIR%\logs\ SurfaceDockFWI. log»

  Дополнительные сведения можно найти в документации по [параметрам командной строки](https://docs.microsoft.com/windows/win32/msi/command-line-options) .

> [!IMPORTANT]
> Если вы хотите, чтобы подложка Surface обновлялась с помощью любого другого метода, ознакомьтесь со сведениями о том, как [Обновить стыковочный узел Surface](https://support.microsoft.com/help/4023478/surface-update-your-surface-dock) .

## Развертывание Intune

Вы можете использовать Intune для распространения обновления встроенного по Surface Dock на ваши устройства. Сначала необходимо преобразовать MSI-файл в формат intunewin, как описано в следующей документации: [центр управления приложениями в Skype standalone-Win32](https://docs.microsoft.com/intune/apps/apps-win32-app-management).

Используйте следующую команду:
  - **msiexec/i \<path to msi file\> /quiet/q**

## Проверка завершения обновления встроенного по

Встроенное по Surface Dock состоит из двух компонентов:

- **Component10:** Встроенное по модуля Micro Controller (MCU)
- **Component20:** Встроенное по порта (DP).

Успешное завершение обновления встроенного по для Surface Dock приводит к новым значениям раздела реестра для этих компонентов микропрограмм.

**Чтобы проверить наличие обновлений, выполните указанные ниже действия.**

1. Откройте программу regedit и перейдите к следующему разделу реестра:

    - **HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\WUDF\Services\SurfaceDockFwUpdate\Parameters**

2. Найдите разделы реестра: **Component10CurrentFwVersion и Component20CurrentFwVersion**, которые ссылаются на микропрограмму, установленную в настоящее время на устройстве.

   ![Процесс установки обновления встроенного по для Surface Dock](images/regeditDock.png)

3. Убедитесь, что новые значения в реестре соответствуют обновленным значениям раздела реестра, указанным в ссылке версии в конце документа. Если значения совпадают, микропрограмма успешно обновлена.

4. Если не удается проверить, ознакомьтесь с разделом журнал событий и советы по устранению неполадок в следующем разделе.

## Ведение журнала событий

**Таблица1. Файлы журнала для обновления встроенного по для Surface Dock**

| Log                              | Местонахождение                               | Заметки                                                                                                                                                                                                         |
| -------------------------------- | --------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Журнал обновлений встроенного по для Surface Dock | Необходимо указать путь (см. Примечание) | Более ранними версиями этого средства были написаны события для приложений и служб Logs\Microsoft Surface Dock.                                                                                                  |
| Журнал установки устройств Windows       | %windir%\inf\setupapi.dev.log           | Дополнительные сведения об использовании журнала установки устройств можно найти в документации [Setupapi Logging](https://docs.microsoft.com/windows-hardware/drivers/install/setupapi-logging--windows-vista-and-later-) . |


**Таблица2. Идентификаторы журнала событий для обновления встроенного по для Surface Dock**<br>
События записываются в журнал событий приложений.  Примечание. более ранними версиями этого средства были написаны события для приложений и служб Logs\Microsoft Surface Dock.

| Идентификатор события | Тип события                                                           |
| -------- | -------------------------------------------------------------------- |
| 2001     | Обновление встроенного по Dock запущено.                                    |
| 2002     | Обновление встроенного по Dock пропущено, так как Dock имеет актуальную версию. |
| 2003     | Обновление встроенного по Dock не удалось получить версию встроенного по.                 |
| 2004     | Запросите версию микропрограммы.                                       |
| 2005     | Встроенное по Dock не удалось запустить обновление.                                |
| 2006     | Не удалось отправить пары предложения и полезных данных.                                  |
| 2007     | Обновление встроенного по завершилось.                                            |
| 2008     | НАЧАТЬ телеметрию Dock.                                                |
| 2011     | Телеметрическая подброска.                                                  |

## Советы по устранению неполадок

- Вы можете полностью отключить питание от устройства Surface Dock из разъема переменного тока, чтобы сбросить док Surface.
- Разъедините все периферийные устройства, кроме док Surface.
- Удалите все текущие обновления встроенного по стыковочного узла Surface, а затем установите последнюю версию.
- Убедитесь в том, что стыковочный узел не подключен к сети, а затем подождите, пока обновление завершится с помощью индикатора на порте Ethernet Dock. Дождитесь, пока индикатор не перестанет мигать, прежде чем отключать Surface Dock из Power.
- Подключите стыковочный модуль Surface на другом устройстве, чтобы узнать, может ли она обновить док-станция.

## Справочник по версиям

>[!NOTE]
>Файл установки освобождается в следующем формате: **Surface_Dock_FwUpdate_X.XX.XXX_Win10_XXXXX_XX.XXX.XXXXX_X.MSI** (ex: Surface_Dock_FwUpdate_1.42.139_Win10_17134_19.084.31680_0.msi) и по умолчанию устанавливается в папку C:\Program Files\SurfaceUpdate.

### Версия 1.53.139.0
*Дата выпуска: 4 августа 2020 г.*

Эта версия обновления встроенного по для Surface Dock включает исправления ошибок и поддержку:
- Обновление Dock Surface 1 с помощью Surface Pro X. 
   > [!NOTE]
   > Если вы используете Surface Pro X, скачайте файл. Сборка ARM64. Для всех остальных устройств используйте сборку AMD64. 
 


### Версия 1.42.139 
*Дата выпуска: Сентябрь 18 2019*

Эта версия, содержащаяся в Surface_Dock_FwUpdate_1.42.139_Win10_17134_19.084.31680_0.MSI, обновляет микропрограммы в фоновом режиме. 
**Обновлены значения разделов реестра:**<br>

- Component10CurrentFwVersion обновлен до **4ac3970**.
- Component20CurrentFwVersion обновлен до **4a1d570**.

Она добавляет поддержку для планшетов Surface Pro 7 и Surface 3.

## Устаревшие версии

### Версия 2.23.139.0
*Дата выпуска: 10 октября 2018 г.*

В этой версии Surface Dock Updater добавлена поддержка следующих возможностей:

- Добавление поддержки для Surface Pro 6
- Добавление поддержки для портативного компьютера Surface 2


### Версия 2.22.139.0
*Дата выпуска: 26 июля 2018*

В этой версии Surface Dock Updater добавлена поддержка следующих возможностей:

- Повышение надежности обновления
- Добавление поддержки Surface Go

### Версия 2.12.136.0
*Дата выпуска: 29 января 2018 г.*

В этой версии Surface Dock Updater добавлена поддержка следующих устройств:
* обновление встроенного ПО основного чипсета док-станции Surface;
* обновление встроенного ПО порта дисплея док-станции Surface
* Повышенная стабильность внешних мониторов при использовании с Surface Book или Surface Book 2

Кроме того, установка этой версии средства обновления Surface Dock на устройствах Surface Book, включает следующее:
* обновление встроенного ПО Surface Book Base;
* поддержка обновления встроенного ПО док-станции Surface с улучшениями, предназначенными для устройств Surface Book.


### Версия 2.9.136.0
*Дата выпуска: 3 ноября 2017 г.*

В этой версии Surface Dock Updater добавлена поддержка следующих устройств:

* обновление встроенного ПО порта дисплея док-станции Surface
* Устраняет проблему передачи звука через пассивные адаптеры порта дисплея

### Версия 2.1.15.0
*Дата выпуска: 19 июня 2017 г.*

В этой версии Surface Dock Updater добавлена поддержка следующих возможностей:

* ноутбук Surface
* Surface Pro

### Версия 2.1.6.0
*Дата выпуска: 7 апреля 2017 г.*

В этой версии Surface Dock Updater добавлена поддержка следующих возможностей:

* обновление встроенного ПО порта дисплея док-станции Surface;
* требуется Windows 10.

### Версия 2.0.22.0
*Дата выпуска: 21 октября 2016 г.*

В этой версии Surface Dock Updater добавлена поддержка следующих возможностей:

* обновление для встроенного ПО USB док-станции Surface;
* повышенная надежность порта Ethernet, звукового и USB-портов.

### Версия 1.0.8.0
*Дата выпуска: 26 апреля 2016 г.*

В этой версии Surface Dock Updater добавлена поддержка следующих возможностей:

* обновление встроенного ПО основного чипсета док-станции Surface;
* обновление встроенного ПО порта дисплея док-станции Surface

