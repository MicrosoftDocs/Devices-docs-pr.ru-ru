---
title: Режим корпоративного управления Surface (Surface)
description: Узнайте, как эта функция устройств Surface с UEFI Surface помогает защищать и управлять параметрами микропрограмм в Организации.
keywords: UEFI, Настройка, встроенное по, безопасность, semm
ms.prod: w10
ms.mktglfcycl: manage
ms.pagetype: surface, devices, security
ms.sitesec: library
author: coveminer
ms.author: greglin
ms.topic: article
ms.reviewer: hachidan
manager: laurawi
ms.localizationpriority: medium
audience: itpro
ms.date: 05/26/2020
ms.openlocfilehash: 116aeb6d1d92f387efa34319f7852febda729207
ms.sourcegitcommit: 109d1d7608ac4667564fa5369e8722e569b8ea36
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/27/2020
ms.locfileid: "10835608"
---
# Режим корпоративного управления Surface (Майкрософт)

Корпоративная версия Microsoft Surface Management Mode (SEMM) — это функция Surface Devices с UEFI Surface, которая позволяет защищать и управлять параметрами микропрограмм в Организации. С помощью SEMM ИТ-специалисты могут подготовить конфигурацию параметров UEFI и установить их на устройстве Surface. Помимо возможности настройки параметров UEFI SEMM также использует сертификат для защиты конфигурации от несанкционированного изменения или удаления.

>[!NOTE]
>SEMM доступен только на устройствах с микропрограммой UEFI Surface. Это относится к большинству устройств Surface, в том числе конфигураций Surface Pro 7, Surface Pro X и Surface 3 на компьютере с процессором Intel. SEMM не поддерживается в версии 15 Surface для настольных ПК с процессором AMD (доступно только в качестве розничного SKU). 

Когда устройства Surface настраиваются SEMM и защищены с помощью сертификата SEMM, они считаются *зарегистрированными* в SEMM. После удаления сертификата SEMM и управления параметрами UEFI устройство Surface считается *незарегистрированным* в SEMM, а на нем.

Существует два варианта администрирования, которые можно использовать для управления SEMM и зарегистрированными устройствами Surface (автономный инструмент или интеграция с диспетчером конфигураций конечных точек Microsoft). В этой статье описывается автономный инструмент SEMM, который называется конфигуратором UEFI Surface (Майкрософт). Дополнительные сведения о том, как управлять SEMM с помощью диспетчера конфигураций конечных точек Майкрософт, [можно найти в разделе Использование диспетчера конфигураций конечных точек Microsoft для управления устройствами с помощью SEMM](https://technet.microsoft.com/itpro/surface/use-system-center-configuration-manager-to-manage-devices-with-semm).


## Конфигуратор UEFI Surface (Майкрософт)

Основной рабочей областью SEMM является конфигуратор Microsoft Surface UEFI, как показано на рисунке 1. Конфигуратор UEFI Surface (Майкрософт) — это инструмент, который используется для создания пакетов установщика Windows (MSI) или образов WinPE, которые используются для регистрации, настройки и отмены регистрации SEMM на устройстве Surface. Эти пакеты содержат файл конфигурации, в котором указаны параметры для UEFI. SEMM пакеты также содержат сертификат, установленный и сохраненный в микропрограмм и используемый для проверки подписи файлов конфигурации перед применением параметров UEFI.

>[!NOTE]
>Теперь конфигуратор UEFI Surface и SEMM можно использовать для управления портами на док Surface 2. Дополнительные сведения можно найти в разделе [безопасные порты Surface Dock 2 с помощью SEMM](secure-surface-dock-ports-semm.md).

![Конфигуратор UEFI Surface (Майкрософт)](images/surface-ent-mgmt-fig1-uefi-configurator.png "Microsoft Surface UEFI Configurator")

*Рисунок 1. Конфигуратор UEFI Surface (Майкрософт)*


Вы можете использовать средство конфигуратора UEFI Surface (Майкрософт) в трех режимах:

* [Пакет конфигурации UEFI Surface](#configuration-package). Этот режим используется для создания пакета конфигурации UEFI Surface для регистрации устройства Surface в SEMM и для настройки параметров UEFI на зарегистрированных устройствах.
* [Установка пакета UEFI Surface](#reset-package). Используйте этот режим, чтобы отменить регистрацию устройства Surface из SEMM.
* [Запрос восстановления UEFI Surface](#recovery-request). Используйте этот режим, чтобы ответить на запрос на восстановление для отмены регистрации устройства Surface из SEMM, в котором не удалось выполнить операцию сброса пакета.


#### Скачать конфигуратор Microsoft Surface UEFI

Вы можете скачать конфигуратор Microsoft Surface UEFI на странице [Surface Tools для IT](https://www.microsoft.com/download/details.aspx?id=46703) в центре загрузки Майкрософт.

### Пакет конфигурации

Пакеты конфигурации UEFI Surface являются основным механизмом для реализации SEMM на Surface Devices и управления ими. Эти пакеты содержат файл конфигурации для параметров UEFI, заданные во время создания пакета в конфигураторе UEFI Microsoft Surface и файле сертификата, как показано на рисунке 2. Когда пакет конфигурации запускается в первый раз на устройстве Surface, которое еще не зарегистрировано в SEMM, он подготавливает файл сертификата в микропрограмме устройства и регистрирует устройство в SEMM. При регистрации устройства в SEMM вам будет предложено подтвердить операцию, указав последние две цифры отпечатка сертификата SEMM перед сохранением файла сертификата, после чего регистрация может быть завершена. Это подтверждение требует, чтобы пользователь выдавался на устройстве на момент регистрации, чтобы подтвердить выполнение подтверждения.

![Защита пакета конфигурации SEMM с помощью сертификата](images/surface-ent-mgmt-fig2-securepackage.png "Secure a SEMM configuration package with a certificate")

*Рисунок 2. Защита пакета конфигурации SEMM с помощью сертификата*

Дополнительные сведения о требованиях для SEMM сертификата можно найти в разделе [требования к сертификату режима управления предприятием в Surface Management](#surface-enterprise-management-mode-certificate-requirements) » этой статьи.

>[!NOTE]
>Вы также можете указать пароль UEFI с помощью SEMM, который требуется для просмотра **параметров безопасности**, **устройств**, **конфигурации загрузки**или **корпоративных** страниц для UEFI Surface.

После регистрации устройства в SEMM файл конфигурации читается и параметры, заданные в файле, применяются к UEFI. При запуске пакета конфигурации на устройстве, которое уже зарегистрировано в SEMM, подпись файла конфигурации сверяется с сертификатом, который хранится в микропрограммном обеспечении устройства. Если подпись не совпадает, никакие изменения не применяются к устройству.

### Включение и отключение устройств на UEFI Surface с помощью SEMM

Ниже перечислены все доступные устройства, которыми можно управлять в SEMM.

* USB-порт закрепления
* Встроенный звуковой канал
* DGPU
* Клавиатура-обложка Type Cover
* Micro SD-карта
* Передняя камера
* Задняя камера
* ИК-камера для Windows Hello
* Только Bluetooth
* Wi-Fi и Bluetooth;
*              LTE           

 >[!NOTE]
>Встроенные устройства, которые отображаются на странице устройства UEFI, могут отличаться в зависимости от вашего устройства или корпоративной среды. Например, страница "устройства UEFI" не поддерживается на Surface Pro X; LTE отображается только на устройствах с поддержкой LTE. 
### Настройка дополнительных параметров с помощью SEMM
**Таблица1. Advanced settings (Дополнительные параметры)**

| Параметр                            | Описание                                                                                                                                                                                        |
| ---------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| IPv6 для загрузки PXE                  | Позволяет управлять поддержкой IPv6 для загрузки PXE. Если вы не настраиваете этот параметр, поддержка IPv6 для загрузки PXE отключена.                                                                               |
| Альтернативная загрузка                     | Позволяет управлять использованием альтернативных загрузочных очередей для загрузки напрямую на USB-или сетевое устройство, нажав кнопку "Громкость" и выключатель мощности во время загрузки. Если вы не настраиваете этот параметр, используется альтернативная загрузка. |
| Блокировка порядка загрузки                    | Позволяет блокировать последовательность загрузки для предотвращения изменений. Если вы не настраиваете этот параметр, блокировка порядка загрузки отключена.                                                                                                        |
| USB-загрузка                           | Позволяет управлять загрузкой USB-устройств. Если вы не настраиваете этот параметр, USB-загрузка включена.                                                                                                                 |
| Сетевой стек                      | Позволяет управлять параметрами загрузки стека сети. Если вы не настраиваете этот параметр, возможность управления параметрами загрузки стека сети отключена.                                                                                                           |
| Автоматическое включение                      | Позволяет управлять параметрами загрузки для автоматического включения. Если вы не настраиваете этот параметр, функция автоматического включения включена.                                                                                                        |
| Одновременные многопоточные потоки (SMT) | Позволяет управлять одновременным многопоточным потоком (SMT), чтобы включить или отключить функцию Hyper-Threading. Если вы не настраиваете этот параметр, SMT включен.                                                  |
|Включение ограничения батареи| Позволяет управлять функцией ограничения заряда батареи. Если вы не настраиваете этот параметр, ограничение на батарею включено |
| Безопасность                           | Отображение страницы **безопасности** UEFI Surface. Если вы не настраиваете этот параметр, отобразится страница "безопасность".                                                                                                                 |
| Устройства                            | Отображение страницы " **устройства** UEFI Surface". Если вы не настраиваете этот параметр, отображается страница "устройства".                                                                                                                     |
| Загрузка                               | Отображается страница **загрузки** UEFI Surface. Если вы не настраиваете этот параметр, отображается страница загрузки.                                                                                                                                                            |
| DateTime                           | Отображается страница **DateTime** UEFI Surface. Если вы не настраиваете этот параметр, отображается страница DateTime.                                                                                                                |



>[!NOTE]
>При создании пакета конфигурации SEMM на странице **успешно** отображаются два символа, как показано на рисунке 3.

![Отображение отпечатка сертификата](images/surface-ent-mgmt-fig5-success.png "Certificate thumbprint display")

*Рисунок 3. Отображение двух последних знаков отпечатка сертификата на странице "успешно"*

Эти символы — это последние два символа отпечатка сертификата, которые должны быть записаны или записаны. Эти символы необходимы для подтверждения регистрации в SEMM на устройстве Surface, как показано на рисунке 4.

![Подтверждение регистрации в SEMM](images/surface-ent-mgmt-fig6-enrollconfirm.png "Enrollment confirmation in SEMM")

*Рисунок 4. Подтверждение регистрации в SEMM с отпечатком сертификата SEMM*

>[!NOTE]
>Администраторы, у которых есть доступ к файлу сертификата (PFX), могут в любое время прочитать отпечаток, открыв PFX-файл в CertMgr. Чтобы просмотреть отпечаток с помощью CertMgr, выполните указанные ниже действия.
>1. Щелкните PFX-файл правой кнопкой мыши и выберите команду **Открыть**.
>2. Разверните папку в области навигации.
>3. Щелкните **Сертификаты**.
>4. Щелкните правой кнопкой мыши свой сертификат в основной области и выберите команду **Открыть**.
>5. Откройте вкладку **сведения** .
>6. В раскрывающемся меню **Показать** должны быть выбраны только **все** или **свойства** .
>7. Выберите **отпечаток**поля.

Для регистрации устройства Surface в SEMM или применения конфигурации UEFI из пакета конфигурации все, что нужно, — это запустить MSI-файл с правами администратора на предполагаемом устройстве Surface. Вы можете использовать технологии развертывания приложений или операционной системы, такие как [Microsoft Endpoint Configuration Manager](https://technet.microsoft.com/library/mt346023) или [Microsoft Deployment Toolkit](https://technet.microsoft.com/windows/dn475741). Если вы зарегистрируете устройство в SEMM, для подтверждения регистрации на устройстве необходимо, чтобы оно присутствовало. При применении конфигурации к устройствам, которые уже зарегистрированы в SEMM, взаимодействие с пользователем не требуется.

Пошаговое руководство по регистрации устройства Surface в SEMM или применении конфигурации UEFI Surface с SEMM можно найти в статье [Регистрация и настройка устройств Surface с помощью SEMM](https://technet.microsoft.com/itpro/surface/enroll-and-configure-surface-devices-with-semm).

### Сброс пакета

Пакет сброса UEFI Surface используется для выполнения только одной задачи — для отмены регистрации устройства Surface из SEMM. В пакете Reset есть подписанные инструкции для удаления сертификата SEMM из встроенного по устройства и сброса параметров UEFI в заводские настройки по умолчанию. Как и пакет конфигурации UEFI Surface, пакеты сброса должны быть подписаны с помощью того же сертификата SEMM, который предоставлен на устройстве Surface. При создании пакета сброса SEMM необходимо предоставить серийный номер устройства Surface, которое вы хотите сбросить. Пакеты сброса SEMM не являются универсальными и зависят от одного устройства.

### Запрос на восстановление

В некоторых сценариях невозможно использовать пакет сброса UEFI Surface. (Например, если Windows не удается использовать на устройстве Surface.) В этих сценариях вы можете отменить регистрацию устройства Surface из SEMM с помощью страницы **управления предприятием** UEFI Surface (показанной на рисунке 5) с операцией запроса на восстановление.

![Инициация запроса на восстановление SEMM](images/surface-ent-mgmt-fig7-semmrecovery.png "Initiate a SEMM recovery request")

*Рисунок 5. Инициация запроса на восстановление SEMM на странице управления предприятием*

Когда вы используете процесс на странице **управления предприятием** для сброса SEMM на устройстве Surface, вы предоставляете запрос на сброс. Этот запрос на сброс можно сохранить как файл на USB-накопителе, скопировать как текст или прочитать как QR-код на мобильном устройстве, чтобы его можно было легко отправить по электронной почте или по сообщению. Используйте параметр запроса на сброс конфигуратора Microsoft Surface UEFI, чтобы загрузить файл запроса на сброс или ввести текст запроса на сброс или QR-код. Конфигуратор UEFI Surface (Майкрософт) создаст проверочный код, который можно ввести на устройстве Surface. Если ввести код на устройстве Surface и нажать кнопку **перезапустить**, устройство не будет зарегистрировано в SEMM. 

>[!NOTE]
>Срок действия запроса на сброс истекает через 2 часа после его создания.

Пошаговое руководство по отмене регистрации устройств Surface из SEMM можно найти в статье [Отмена регистрации устройств Surface из SEMM](https://technet.microsoft.com/itpro/surface/unenroll-surface-devices-from-semm).

## Требования к сертификатам режима управления корпоративными устройствами Surface

>[!NOTE]
>Сертификат SEMM требуется для внесения изменений в SEMM или параметры UEFI Surface на устройствах с зарегистрированной Surface. Если сертификат SEMM повреждается или теряется, SEMM не может быть удален или сброшен. Управляйте сертификатом SEMM в соответствии с соответствующим решением для резервного копирования и восстановления.

Пакеты, созданные с помощью средства конфигуратора UEFI Surface (Майкрософт), подписаны сертификатом. Этот сертификат гарантирует, что после регистрации устройства в SEMM для изменения параметров UEFI можно использовать только пакеты, созданные с помощью утвержденного сертификата. Для сертификата SEMM рекомендуются следующие параметры:

* **Алгоритм ключа** — RSA 
* **Длина ключа** — 2048
* **Алгоритм хеша** — SHA-256
* **Тип** : проверка подлинности сервера SSL
* **Использование ключа** : Цифровая подпись, шифрование ключей
* **Provider (поставщик** ) — Улучшенный поставщик криптографии RSA и AES (Майкрософт)
* **Дата окончания срока действия** – 15 месяцев от создания сертификата
* **Политика экспорта ключа** : возможность экспорта

Кроме того, рекомендуется, чтобы сертификат SEMM прошел проверку подлинности в двухуровневой архитектуре инфраструктуры открытых ключей (PKI), когда промежуточный центр сертификации (ЦС) выделен для SEMM, что обеспечивает отзыв сертификата. Дополнительные сведения о двухуровневой конфигурации PKI можно найти в статье [тестирование лаборатории: развертывание ИЕРАРХИИ PKI из ДВУХУРОВНЕВОЙ службы сертификации](https://technet.microsoft.com/library/hh831348).

>[!NOTE]
>Вы можете использовать следующий сценарий PowerShell для создания самозаверяющего сертификата, который будет использоваться в сценариях проверки правописания.
 > Чтобы использовать этот сценарий, скопируйте приведенный ниже текст в блокнот и сохраните его в виде сценария PowerShell (PS1-файла). Этот сценарий создает сертификат с паролем `12345678` .<br/><br/>Сертификат, созданный этим сценарием, не рекомендуется для рабочих сред.
  
   ```
if (-not (Test-Path "Demo Certificate"))  { New-Item -ItemType Directory -Force -Path "Demo Certificate" }
if (Test-Path "Demo Certificate\TempOwner.pfx") { Remove-Item "Demo Certificate\TempOwner.pfx" }

# Generate the Ownership private signing key with password 12345678
$pw = ConvertTo-SecureString "12345678" -AsPlainText -Force

$TestUefiV2 = New-SelfSignedCertificate `
  -Subject "CN=Surface Demo Kit, O=Contoso Corporation, C=US" `
  -Type SSLServerAuthentication `
  -HashAlgorithm sha256 `
  -KeyAlgorithm RSA `
  -KeyLength 2048 `
  -KeyUsage KeyEncipherment `
  -KeyUsageProperty All `
  -Provider "Microsoft Enhanced RSA and AES Cryptographic Provider" `
  -NotAfter (Get-Date).AddYears(25) `
  -TextExtension @("2.5.29.37={text}1.2.840.113549.1.1.1") `
  -KeyExportPolicy Exportable

$TestUefiV2 | Export-PfxCertificate -Password $pw -FilePath "Demo Certificate\TempOwner.pfx"
   ```

Для использования с SEMM и Microsoft Surface UEFI, сертификат должен быть экспортирован с использованием закрытого ключа и с защитой паролем. При необходимости конфигуратор Microsoft Surface UEFI предложит вам выбрать файл сертификата SEMM (PFX) и пароль сертификата.

>[!NOTE]
>Для организаций, использующих корневой каталог в инфраструктуре инфраструктуры PKI, для проверки подлинности сертификата SEMM необходимо запустить конфигуратор UEFI Microsoft Surface в среде, подключенной к корневому центру сертификации. Пакеты, созданные конфигуратором UEFI Surface (Майкрософт), можно передавать в виде файлов, поэтому они могут быть перенесены в автономную сетевую среду с помощью съемных носителей, например USB-джойстика.

### Вопросы и ответы по управлению сертификатами

Рекомендуемая *Минимальная* длина — 15 месяцев. Вы можете использовать сертификат с истекшим сроком действия менее 15 месяцев или использовать сертификат, срок действия которого истекает более 15 месяцев.

>[!NOTE] 
>После истечения срока действия сертификата он не возобновится автоматически. 

**Будут ли существующие компьютеры продолжать применять настройки BIOS после 15 месяцев?**

Да, но только в том случае, если пакет был подписан, когда сертификат был действителен.

**Нужно** **ли обновлять пакет SEMM и сертификат на всех компьютерах, на которых они установлены?**

Если вы хотите, чтобы SEMM перезагрузить или восстановить работу, сертификат должен быть действителен и не просрочен. 

**Можно ли создать массовый сброс пакетов для каждой из них, которые нужно заказать? Можно ли построить один из них, чтобы сбросить все машины в нашей среде?**

Примеры PowerShell, создающие пакет конфигурации для определенного типа устройства, также могут использоваться для создания пакета сброса, который не зависит от последовательного номера. Если сертификат по-прежнему действителен, вы можете создать пакет сброса с помощью PowerShell, чтобы сбросить SEMM.

## Журнал версий

### Версия 2.71.139.0

Эта версия SEMM добавляет поддержку функций управления Surface Dock 2 для Surface Book 3, Surface 3 и Surface Pro 7, в том числе:

- Включение звука (блокирование и разблокирование), порта Ethernet и USB
- Возможность создавать пакеты закрепления для узлов с проверкой подлинности и без проверки подлинности

### Версия 2.70.130.0

Эта версия SEMM включает:

- Поддержка Surface Go 2
- Поддержка для книги Surface Book 3
- Исправления ошибок


### Версия 2.59.139.0

* Поддержка моделей Surface Pro 7, Surface Pro X и Surface ноутбука 3 13,5 и 15 дюймов с процессором Intel. Примечание: Surface портативный компьютер 3 15 "процессор AMD не поддерживается.

- Поддержка функции Wake on Power On

### Версия 2.54.139.0
* Поддержка на Surface Hub 2S
* Исправления ошибок

### Версия 2.43.136.0
* Поддержка включения и отключения simulatenous многовирусной поддержки 
* Различные варианты настройки WiFi и Bluetooth для некоторых устройств 
* Лимит батареи удален для Surface Studio 

### Версия 2.26.136.0
* Добавление поддержки в Surface Studio 2
* Функция ограничения батареи

### Версия 2.21.136.0
* Добавление поддержки в Surface Pro 6
* Добавление поддержки к ноутбуку Surface 2

### Версия 2.14.136.0
* Добавление поддержки к Surface Go

### Версия 2.9.136.0
* Добавление поддержки в книгу Surface 2
* Добавление поддержки на Surface Pro по LTE
* Улучшения специальных возможностей

### Версия 1.0.74.0
* Добавление поддержки на ноутбук Surface
* Добавление поддержки на Surface Pro
* Исправления ошибок и общее улучшение

## Статьи по теме

- [Регистрация устройств Surface в SEMM и их настройка](enroll-and-configure-surface-devices-with-semm.md)
- [Отмена регистрации устройств Surface в SEMM](unenroll-surface-devices-from-semm.md)
- [Защищенные порты Surface Dock 2 с SEMM](secure-surface-dock-ports-semm.md)
