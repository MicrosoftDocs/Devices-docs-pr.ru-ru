---
title: Surface Enterprise Management Mode (Surface)
description: Узнайте, как эта функция устройств Surface с UEFI помогает защитить параметры микропрограмм и управлять ими в организации.
keywords: uefi, configure, firmware, secure, semm
ms.prod: w10
ms.mktglfcycl: manage
ms.pagetype: surface, devices, security
ms.sitesec: library
author: coveminer
ms.author: greglin
ms.topic: article
ms.reviewer: hachidan
manager: laurawi
ms.localizationpriority: medium
audience: itpro
ms.date: 01/15/2021
ms.openlocfilehash: e6f81639253c646f5d3956243a80f4d61c91028a
ms.sourcegitcommit: 1053479c191fd10651d31a466fad1769fb0cd28b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/16/2021
ms.locfileid: "11271423"
---
# Режим управления Microsoft Surface Enterprise

Режим управления Microsoft Surface Enterprise (SEMM) — это функция устройств Surface с UEFI Surface, которая позволяет защитить параметры микропрограмм в организации и управлять ими. С помощью SEMM ИТ-специалисты могут подготовить конфигурации параметров UEFI и установить их на устройство Surface. Помимо возможности настройки параметров UEFI SEMM также использует сертификат для защиты конфигурации от несанкционированного изменения или удаления. SEMM — это требование, необходимое для переноса Surface Hub 2S в Windows 10 Pro и Корпоративная.

>[!NOTE]
>SEMM доступен только на устройствах с микропрограммным ОБЕСПЕЧЕНИЕм UEFI Surface. Это включает большинство других устройств Surface, в том числе Surface Pro 7+, Surface Pro X, Surface Hub 2S и Surface Laptop 3 commercial SKUs с процессором Intel и Surface Laptop Go. SeMM не поддерживается в 15-миллиметровом SKU Surface Laptop 3 с процессором AMD (доступно только в качестве розничного SKU). 

Если устройства Surface настроены с помощью SEMM и защищены сертификатом SEMM, они считаются *зарегистрированными* в SEMM. При удалении сертификата SEMM и возвращении пользователю устройства управления настройками UEFI ** устройство Surface считается отозваженным в SEMM.

Существует два варианта администрирования, которые можно использовать для управления SEMM и регистрации устройств Surface— это автономный инструмент или интеграция с Microsoft Endpoint Configuration Manager. В этой статье описывается автономный инструмент SEMM, называемый Microsoft Surface UEFI Configurator. Дополнительные сведения об управлении SEMM с помощью Microsoft Endpoint Configuration Manager см. в под управлением Microsoft Endpoint Configuration Manager для управления устройствами [с помощью SEMM.](https://technet.microsoft.com/itpro/surface/use-system-center-configuration-manager-to-manage-devices-with-semm)


## Microsoft Surface UEFI Configurator

Основной рабочей областью SEMM является Microsoft Surface UEFI Configurator, как показано на рисунке 1. Microsoft Surface UEFI Configurator — это инструмент, используемый для создания пакетов установщика Windows (MSI) или образов WinPE, используемых для регистрации, настройки и регистрации SEMM на устройстве Surface. Эти пакеты содержат файл конфигурации, в котором указаны параметры UEFI. Пакеты SEMM также содержат сертификат, который устанавливается и хранится во микропрограмме и используется для проверки подписи файлов конфигурации перед установкой параметров UEFI.

>[!NOTE]
>Теперь вы можете использовать конфигуратор UEFI Surface и SEMM для управления портами на док-станции Surface 2. Дополнительные узнать [см. в портах безопасной док-станции Surface 2 с помощью SEMM.](secure-surface-dock-ports-semm.md)

![Microsoft Surface UEFI Configurator](images/surface-ent-mgmt-fig1-uefi-configurator.png "Microsoft Surface UEFI Configurator")

*Рисунок 1. Microsoft Surface UEFI Configurator*


Средство настройки Microsoft Surface UEFI можно использовать в трех режимах:

* [Пакет конфигурации UEFI Surface.](#configuration-package) Используйте этот режим для создания пакета конфигурации UEFI Surface для регистрации устройства Surface в SEMM и настройки параметров UEFI на зарегистрированных устройствах.
* [Surface UEFI Reset Package](#reset-package). Используйте этот режим для открепки устройства Surface из SEMM.
* [Запрос на восстановление UEFI Surface.](#recovery-request) Используйте этот режим для ответа на запрос на восстановление для открепления устройства Surface из SEMM, в котором операция сброса пакета не удалась.


#### Скачать Microsoft Surface UEFI Configurator

Вы можете скачать Microsoft Surface UEFI Configurator со страницы "Инструменты Surface для [ИТ-специалисты"](https://www.microsoft.com/download/details.aspx?id=46703) в Центре загрузки Майкрософт.

### Пакет конфигурации

Пакеты конфигурации UEFI Surface — это основной механизм реализации SEMM на устройствах Surface и управления им. Эти пакеты содержат файл конфигурации параметров UEFI, указанный при создании пакета в Microsoft Surface UEFI Configurator, и файл сертификата, как показано на рисунке 2. При первом запуске пакета конфигурации на устройстве Surface, которое еще не зарегистрировать в SEMM, он подготовка файла сертификата во микропрограмме устройства и регистрация устройства в SEMM. При регистрации устройства в SEMM вам будет предложено подтвердить операцию, указав последние две цифры отпечатка сертификата SEMM перед хранением файла сертификата и завершением регистрации. Для этого подтверждения пользователь должен физически присутствовать на устройстве во время регистрации.

![Защита пакета конфигурации SEMM с помощью сертификата](images/surface-ent-mgmt-fig2-securepackage.png "Secure a SEMM configuration package with a certificate")

*Рисунок 2. Защита пакета конфигурации SEMM с помощью сертификата*

Дополнительные сведения о требованиях к сертификату SEMM см. в разделе "Требования к сертификатам в режиме управления [Surface](#surface-enterprise-management-mode-certificate-requirements) Enterprise" этой статьи.

>[!NOTE]
>Вы также можете указать пароль UEFI с SEMM, который **** необходим для **** просмотра страниц **безопасности,** **устройств,** конфигурации загрузки или управления предприятием UEFI Surface.

После регистрации устройства в SEMM файл конфигурации считывается и параметры, указанные в файле, применяются к UEFI. При запуске пакета конфигурации на устройстве, которое уже зарегистрировать в SEMM, подпись файла конфигурации проверяется на сертификат, хранимый во микропрограмме устройства. Если подпись не совпадает, никакие изменения не применяются к устройству.

### Включить или отключить устройства в Surface UEFI с помощью SEMM

В следующем списке показаны все доступные устройства, которые можно управлять в SEMM:

* USB-порт док-станции
* Звук на доске
* DGPU
* Клавиатура-обложка Type Cover
* Карта Micro SD
* Передняя камера
* Задняя камера
* Инфракрасная камера для Windows Hello
* Bluetooth только
* Wi-Fi и Bluetooth;
*              LTE           

 >[!NOTE]
>Встроенные устройства, которые отображаются на странице "Устройства UEFI", могут отличаться в зависимости от устройства или корпоративной среды. Например, страница "Устройства UEFI" не поддерживается на Surface Pro X; LTE отображается только на устройствах, оснащенных LTE. 
### Настройка дополнительных параметров с помощью SEMM
**Таблица1. Advanced settings (Дополнительные параметры)**

| Параметр                            | Описание                                                                                                                                                                                        |
| ---------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| IPv6 для загрузки PXE                  | Позволяет управлять поддержкой IPv6 для загрузки PXE. Если этот параметр не настроен, поддержка IPv6 для загрузки PXE отключена.                                                                               |
| Альтернативная загрузка                     | Позволяет управлять использованием альтернативного порядка загрузки для загрузки непосредственно на USB-устройство или устройство Ethernet, нажимая кнопки "Вниз громкости" и "Питание" во время загрузки. Если этот параметр не настроен, альтернативная загрузка включена. |
| Блокировка порядка загрузки                    | Позволяет заблокировать порядок загрузки, чтобы предотвратить изменения. Если этот параметр не настроен, блокировка порядка загрузки будет отключена.                                                                                                        |
| USB-загрузка                           | Позволяет управлять загрузкой на USB-устройства. Если этот параметр не настроен, usb-загрузка включена.                                                                                                                 |
| Сетевой стек                      | Позволяет управлять настройками загрузки сетевого стека. Если этот параметр не настроен, возможность управления настройками загрузки сетевого стека будет отключена.                                                                                                           |
| Автоматическое питание                      | Позволяет управлять настройками автоматической загрузки Power On. Если этот параметр не настроен, включено автоматическое питание.                                                                                                        |
| Одновременная многопотость (SMT) | Позволяет управлять одновременным многопотоком (SMT), чтобы включить или отключить hyperthreading. Если этот параметр не настроен, smT включен.                                                  |
|Включить ограничение заряда батареи| Позволяет управлять функциями ограничения заряда батареи. Если этот параметр не настроен, ограничение заряда батареи включено |
| Безопасность                           | Отображает страницу безопасности **** UEFI Surface. Если этот параметр не настроен, отображается страница "Безопасность".                                                                                                                 |
| Устройства                            | Отображает страницу устройств UEFI **Surface.** Если этот параметр не настроен, отображается страница "Устройства".                                                                                                                     |
| Загрузка                               | Отображает страницу загрузки **UEFI** Surface. Если этот параметр не настроен, отображается страница загрузки.                                                                                                                                                            |
| DateTime                           | Отображает страницу даты и времени **UEFI** Surface. Если этот параметр не настроен, отображается страница даты и времени.                                                                                                                |
| EnableOSMigration                          | Позволяет перенести Surface Hub 2 из Windows 10 Team в Windows 10 Pro или Windows 10 Корпоративная. Если вы не настроите этот параметр, устройства Surface Hub 2 смогут запускать только Ос Windows 10 Team.   Примечание. Двойная загрузка между Windows 10 Team и Windows 10 Pro/Enterprise недоступна на Surface Hub 2.                                                                                                           |


>[!NOTE]
>При создании пакета конфигурации SEMM на странице **** "Успешно" показано два символа, как показано на рисунке 3.

![Отображение отпечатка сертификата](images/surface-ent-mgmt-fig5-success.png "Certificate thumbprint display")

*Рисунок 3. Отображение последних двух символов отпечатка сертификата на странице "Успешно"*

Эти символы являются последними двумя символами отпечатка сертификата и должны быть записаны или записаны. Символы необходимы для подтверждения регистрации в SEMM на устройстве Surface, как показано на рисунке 4.

![Подтверждение регистрации в SEMM](images/surface-ent-mgmt-fig6-enrollconfirm.png "Enrollment confirmation in SEMM")

*Рисунок 4. Подтверждение регистрации в SEMM с отпечатком сертификата SEMM*

>[!NOTE]
>Администраторы с доступом к файлу сертификата (PFX) могут прочитать отпечаток в любое время, открыв PFX-файл в CertMgr. Чтобы просмотреть отпечаток с помощью CertMgr, выполните данной процедуры:
>1. Щелкните правой кнопкой мыши PFX-файл и выберите **"Открыть".**
>2. Разоберем папку в области навигации.
>3. Щелкните **Сертификаты**.
>4. Щелкните правой кнопкой мыши сертификат на главной области и выберите **"Открыть".**
>5. Перейдите на **вкладку "Сведения".**
>6. **Все** или **только свойства** должны быть выбраны в меню **"Показать".**
>7. Выберите **отпечаток поля.**

Чтобы зарегистрировать устройство Surface в SEMM или применить конфигурацию UEFI из пакета конфигурации, необходимо запустить MSI-файл с административными привилегиями на нужном устройстве Surface. Вы можете использовать технологии развертывания приложений или операционной системы, такие как [Microsoft Endpoint Configuration Manager](https://technet.microsoft.com/library/mt346023) или Microsoft Deployment [набор средств.](https://technet.microsoft.com/windows/dn475741) При регистрации устройства в SEMM необходимо физически присутствовать, чтобы подтвердить регистрацию на устройстве. Взаимодействие с пользователем не требуется при применении конфигурации к устройствам, которые уже зарегистрированы в SEMM.

Пошаговые пошаговые пошаговые правила регистрации устройства Surface в SEMM или применения конфигурации UEFI Surface с помощью SEMM см. в подстроке "Регистрация и настройка устройств Surface с помощью [SEMM".](https://technet.microsoft.com/itpro/surface/enroll-and-configure-surface-devices-with-semm)

### Сброс пакета

Пакет сброса UEFI Surface используется для выполнения только одной задачи — открепить устройство Surface от SEMM. Пакет сброса содержит подписанные инструкции по удалению сертификата SEMM из микропрограммы устройства и сбросу параметров UEFI до заводских настроек по умолчанию. Как и пакет конфигурации UEFI Surface, пакет сброса должен быть подписан с помощью того же сертификата SEMM, что и на устройстве Surface. При создании пакета сброса SEMM необходимо предоставить серийный номер устройства Surface, которое вы собираетесь сбросить. Пакеты сброса SEMM не являются универсальными и являются специфическими для одного устройства.

### Запрос на восстановление

В некоторых сценариях использование пакета сброса UEFI Surface может оказаться невозможным. (Например, если Windows становится непригодной для пользователей на устройстве Surface.) В этих сценариях можно открепить устройство Surface **** от SEMM на странице "Управление предприятием" surface UEFI (показано на рисунке 5) с помощью операции запроса на восстановление.

![Инициировать запрос на восстановление SEMM](images/surface-ent-mgmt-fig7-semmrecovery.png "Initiate a SEMM recovery request")

*Рисунок 5. Инициировать запрос на восстановление SEMM на странице "Управление предприятием"*

При использовании процесса на **** странице "Управление предприятием" для сброса SEMM на устройстве Surface вам предоставляется запрос на сброс. Этот запрос на сброс можно сохранить в виде файла на USB-накопителе, скопировать в виде текста или прочитать как QR-код с мобильным устройством для простого сообщения по электронной почте или сообщения. Используйте параметр запроса на сброс UEFI Microsoft Surface, чтобы загрузить файл запроса на сброс или ввести текст запроса на сброс или QR-код. Microsoft Surface UEFI Configurator будет создавать код проверки, который может быть введен на устройстве Surface. Если ввести код на устройстве **** Surface и нажать кнопку "Перезапустить", устройство будет отослано из SEMM. 

>[!NOTE]
>Срок действия запроса на сброс истекает через два часа после его создания.

Пошаг в пошаговом [](https://technet.microsoft.com/itpro/surface/unenroll-surface-devices-from-semm)

## Требования к сертификатам в режиме управления Surface Enterprise
Для использования SEMM с Microsoft Surface UEFI Configurator требуется сертификат для проверки подписи файлов конфигурации перед применением параметров UEFI. Этот сертификат гарантирует, что после регистрации устройства в SEMM для изменения параметров UEFI можно использовать только пакеты, созданные с помощью утвержденного сертификата.

>[!NOTE]
>Сертификат SEMM необходим для внесения изменений в параметры SEMM или UEFI Surface на зарегистрированных устройствах Surface. Если сертификат SEMM поврежден или потерян, SEMM невозможно удалить или сбросить. Управляйте сертификатом SEMM соответствующим образом с помощью соответствующего решения для резервного копирования и восстановления.

Пакеты, созданные с помощью средства настройки Microsoft Surface UEFI, подписаны сертификатом. Этот сертификат гарантирует, что после регистрации устройства в SEMM для изменения параметров UEFI можно использовать только пакеты, созданные с помощью утвержденного сертификата. 
### Рекомендуемые параметры сертификата
Для сертификата SEMM рекомендуется использовать следующие параметры:

* **Ключевой алгоритм** — RSA 
* **Длина ключа** — 2048
* **Алгоритм hash** — SHA-256
* **Тип** — проверка подлинности SSL Server
* **Использование ключей** — цифровая подпись, шифрование ключей
* **Поставщик** — microsoft Enhanced RSA and AES Cryptographic Provider
* **Дата окончания срока** действия — 15 месяцев с момента создания сертификата
* **Политика экспорта ключей** — экспортируемый

Кроме того, рекомендуется проверить подлинность сертификата SEMM в двухуровневой архитектуре инфраструктуры открытых ключей (PKI), где промежуточный ЦС выделен для SEMM, что позволяет отзывать сертификаты. Дополнительные сведения о двухуровневой конфигурации PKI см. в руководстве по лаборатории тестирования: развертывание иерархии [AD CS Two-Tier PKI.](https://technet.microsoft.com/library/hh831348)

### Самозаверя сертификата 
Вы можете использовать следующий пример сценария PowerShell для создания самозаверяемого сертификата для использования в сценариях проверки концепции.
Чтобы использовать этот сценарий, скопируйте следующий текст в Блокнот и сохраните файл в виде скрипта PowerShell (PS1). 

> [!NOTE]
> Этот сценарий создает сертификат с паролем `12345678` . Сертификат, созданный этим сценарием, не рекомендуется для производственных сред.
  
```powershell
if (-not (Test-Path "Demo Certificate"))  { New-Item -ItemType Directory -Force -Path "Demo Certificate" }
if (Test-Path "Demo Certificate\TempOwner.pfx") { Remove-Item "Demo Certificate\TempOwner.pfx" }

# Generate the Ownership private signing key with password 12345678
$pw = ConvertTo-SecureString "12345678" -AsPlainText -Force

$TestUefiV2 = New-SelfSignedCertificate `
  -Subject "CN=Surface Demo Kit, O=Contoso Corporation, C=US" `
  -Type SSLServerAuthentication `
  -HashAlgorithm sha256 `
  -KeyAlgorithm RSA `
  -KeyLength 2048 `
  -KeyUsage KeyEncipherment `
  -KeyUsageProperty All `
  -Provider "Microsoft Enhanced RSA and AES Cryptographic Provider" `
  -NotAfter (Get-Date).AddYears(25) `
  -TextExtension @("2.5.29.37={text}1.2.840.113549.1.1.1") `
  -KeyExportPolicy Exportable

$TestUefiV2 | Export-PfxCertificate -Password $pw -FilePath "Demo Certificate\TempOwner.pfx"
```

>[!IMPORTANT]
>Для использования с SEMM и Microsoft Surface UEFI Configurator сертификат необходимо экспортировать с закрытым ключом и защитой паролем. Microsoft Surface UEFI Configurator выдаст запрос на выбор файла сертификата SEMM (PFX) и пароля сертификата, если это необходимо.

1.  Создайте папку на диске C:, где вы сохраните сценарий; например, C:\SEMM.
2.  Скопируйте пример сценария в Блокнот или эквивалентный текстовый редактор и сохраните файл в виде скрипта PowerShell (PS1).
3.  Во sign into your PC with administrator credentials and open an elevated PowerShell session.
4.  Убедитесь, что у вас настроены разрешения на запуск сценариев. По умолчанию выполнение сценариев блокируется, если вы не измените политику выполнения. Дополнительные информацию см. [в дополнительных информациях о политиках выполнения.](https://docs.microsoft.com/powershell/module/microsoft.powershell.core/about/about_execution_policies)
5.  В командной подсказке введите полный путь к сценарию и нажмите ввод. Сценарий создает демонстрационный сертификат TempOwner.pfx.

Кроме того, вы можете создать собственный самозаверяовый сертификат с помощью PowerShell. Дополнительные сведения см. в следующей документации по PowerShell: [New-SelfSignedCertificate.](https://docs.microsoft.com/powershell/module/pkiclient/new-selfsignedcertificate)




>[!NOTE]
>Для организаций, которые используют автономный корень в инфраструктуре PKI, настройщик Microsoft Surface UEFI необходимо запустить в среде, подключенной к корневому ЦС, для проверки подлинности сертификата SEMM. Пакеты, созданные Microsoft Surface UEFI Configurator, могут передаваться как файлы и, следовательно, передаваться за пределы автономной сетевой среды со съемным хранилищем, например USB-накопителем.

### Управление сертификатами: faq

Рекомендуемая *минимальная длина* составляет 15 месяцев. Вы можете использовать сертификат, срок действия которого составляет менее 15 месяцев, или сертификат, срок действия которого превышает 15 месяцев.

>[!NOTE] 
>По истечении срока действия сертификата он не обновляется автоматически. 


**Повлияет ли просроченный сертификат на функции устройств, зарегистрированных в SEMM?**<br><br>
Нет, сертификат влияет только на задачи управления ИТ-администратором в SEMM и не влияет на функциональные возможности устройства по истечении срока его действия.


**Потребуется ли обновление пакета SEMM и сертификата на всех компьютерах с этим пакетом?**

Если вы хотите, чтобы восстановление и сброс SEMM работали, сертификат должен быть действительным, а не просроченным. 

**Можно ли создавать пакеты пакетов пакетов для каждой поверхности, которую мы заказим? Можно ли сбросить все компьютеры в нашей среде?**

Примеры PowerShell, которые создают пакеты config для определенного типа устройств, также можно использовать для создания пакета сброса, который не зависит от серийного номера. Если сертификат остается действительным, вы можете создать пакет сброса с помощью PowerShell для сброса SEMM.

## История версий

### Версия 2.79.139.0

Эта версия SEMM включает:
- Поддержка Surface Pro 7 и более
- Улучшения пользовательского интерфейса


### Версия 2.78.139.0

Эта версия SEMM включает:

- Поддержка Surface Laptop Go и Surface Pro X
- Уведомления о выпуске новой версии
- Возможность создания пользовательских пакетов для изменения владельца
- Исправления ошибок

### Версия 2.73.136.0

Эта версия SEMM включает:

- Теперь звук можно отключить на Surface Hub2S с помощью SEMM
- Поддержка Surface Pro X для док-станции 2
- Поддержка диспетчера UEFI для операций, связанных с док-станцией 2
- Исправлена ошибка пакета сброса Surface Go
- Поддержка переноса устройств Surface Hub 2 из Windows 10 Team OS в Windows 10 Pro или Корпоративная.

### Версия 2.71.139.0

Эта версия SEMM добавляет поддержку функций управления док-станции Surface 2 для Surface Book 3, Surface Laptop 3 и Surface Pro 7, в том числе:

- Включение звука (блокировка/разблокировка), Ethernet и USB-порты
- Возможность создания пакетов док-станции как для аутентификация, так и для неавтерицированных хостов

### Версия 2.70.130.0

Эта версия SEMM включает:

- Поддержка Surface Go 2
- Поддержка Surface Book 3
- Исправления ошибок


### Версия 2.59.139.0

* Поддержка моделей Surface Pro 7, Surface Pro X и Surface Laptop 3 13.5 и 15" с процессором Intel. Примечание. Процессор AMD Surface Laptop 3 15" не поддерживается.

- Поддержка функции "После ветвей питания"

### Версия 2.54.139.0
* Поддержка Surface Hub 2S
* Исправления ошибок

### Версия 2.43.136.0
* Поддержка возможности включить или отключить имитацию многомерных пусков 
* Отдельные параметры wi-fi и Bluetooth для некоторых устройств 
* Предел заряда батареи для Surface Studio 

### Версия 2.26.136.0
* Добавление поддержки в Surface Studio 2
* Функция ограничения заряда батареи

### Версия 2.21.136.0
* Добавление поддержки в Surface Pro 6
* Добавление поддержки в Surface Laptop 2

### Версия 2.14.136.0
* Добавление поддержки в Surface Go

### Версия 2.9.136.0
* Добавление поддержки в Surface Book 2
* Добавление поддержки в Surface Pro LTE
* Улучшения доступности

### Версия 1.0.74.0
* Добавление поддержки в Surface Laptop
* Добавление поддержки в Surface Pro
* Исправления ошибок и общее улучшение

## Статьи по теме

- [Регистрация устройств Surface в SEMM и их настройка](enroll-and-configure-surface-devices-with-semm.md)
- [Отмена регистрации устройств Surface в SEMM](unenroll-surface-devices-from-semm.md)
- [Обеспечение безопасности портов Surface Dock 2 с помощью SEMM](secure-surface-dock-ports-semm.md)
